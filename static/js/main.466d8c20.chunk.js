(this.webpackJsonpwebcamera=this.webpackJsonpwebcamera||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,n){e.exports=n(33)},,,,,function(e,t,n){},function(e,t,n){},,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(11),o=n.n(i),c=(n(19),n(20),n(3)),s=n.n(c),l=n(7),u=function(e){return Object(a.useEffect)((function(){var t=e.current;(function(){var e=Object(l.a)(s.a.mark((function e(){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=navigator,!(a=n.mediaDevices)||null===t){e.next=5;break}return e.next=4,a.getUserMedia({video:!0});case 4:t.srcObject=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[e]),e},f=function(e){var t=e.videoEl,n=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=t.current,a=n.current;e.addEventListener("loadedmetadata",(function(){a.width=e.videoWidth,a.height=e.videoHeight,e.style.display="none"})),e.addEventListener("loadeddata",e.play),e.addEventListener("loadeddata",(function t(){a.getContext("2d").drawImage(e,0,0),requestAnimationFrame(t)}))}),[t]),r.a.createElement("canvas",{className:"OriginalVideo",ref:n,style:e.style})},d=n(5),m=n(12),p=n(13),v=function(e,t){e.forEach((function(e){e.score,e.part;var n=e.position,a=n.x,r=n.y;t.beginPath(),t.arc(a,r,3,0,2*Math.PI),t.fillStyle="red",t.fill()}))},h=function(e,t){var n=e.filter((function(e){var t=e.part;return["leftEye","rightEye","leftEar","rightEar"].includes(t)})),a=n.map((function(e){return e.position.x})),r=n.map((function(e){return e.position.y})),i=Math.max.apply(Math,Object(d.a)(a)),o=Math.min.apply(Math,Object(d.a)(a)),c=Math.max.apply(Math,Object(d.a)(r)),s=Math.min.apply(Math,Object(d.a)(r));t.beginPath(),t.moveTo(i,c),t.lineTo(i,s),t.lineTo(o,s),t.lineTo(o,c),t.fillStyle="black",t.fill()},E=function(e){var t=e.videoEl,n=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=t.current,a=n.current,r=function(){var t=Object(l.a)(s.a.mark((function t(){var n,i,o,c,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a({});case 2:return n=t.sent,i=a.getContext("2d"),o=p.a.fromPixels(e),t.next=7,n.estimateMultiplePoses(o,{flipHorizontal:!1,maxDetections:5,scoreThreshold:.6,nmsRadius:20});case 7:c=t.sent,o.dispose(),n.dispose(),l=c.filter((function(e){return.5<e.score})),console.log(l),i.clearRect(0,0,a.width,a.height),l.forEach((function(e){var t=e.keypoints;return v(t,i)})),l.forEach((function(e){var t=e.keypoints;return h(t,i)})),requestAnimationFrame(r);case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e.addEventListener("loadedmetadata",(function(){a.width=e.videoWidth,a.height=e.videoHeight})),e.addEventListener("loadeddata",r)}),[t]),r.a.createElement("canvas",{className:"Keypoints",ref:n,style:e.style})},y=function(){var e=Object(a.useRef)(null);u(e);var t={position:"absolute",top:0,left:0};return r.a.createElement("div",{className:"WebCamera"},r.a.createElement("video",{className:"Input",ref:e}),r.a.createElement("div",{className:"Output",style:{position:"relative"}},r.a.createElement(f,{className:"layer",style:t,videoEl:e}),r.a.createElement(E,{className:"layer",style:t,videoEl:e})))},b=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(y,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[14,1,2]]]);
//# sourceMappingURL=main.466d8c20.chunk.js.map