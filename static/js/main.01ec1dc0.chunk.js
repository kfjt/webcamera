(this.webpackJsonpwebcamera=this.webpackJsonpwebcamera||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(34)},,,,,function(e,t,n){},function(e,t,n){},,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(12),c=n.n(i),o=(n(20),n(21),n(8)),s=n(2),u=n.n(s),l=n(4),f=function(e){var t=e.videoEl,n=e.deviceId;return Object(a.useEffect)((function(){var e=t.current;(function(){var t=Object(l.a)(u.a.mark((function t(){var a,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=navigator,!(r=a.mediaDevices)||null===e){t.next=5;break}return t.next=4,r.getUserMedia({video:{deviceId:n,facingMode:"environment"}});case 4:e.srcObject=t.sent;case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[t,n]),r.a.createElement("video",{ref:t})},d=function(e){var t=e.videoEl,n=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=t.current,a=n.current;e.addEventListener("loadedmetadata",(function(){a.width=e.videoWidth,a.height=e.videoHeight,e.style.display="none"})),e.addEventListener("loadeddata",e.play),e.addEventListener("loadeddata",(function t(){a.getContext("2d").drawImage(e,0,0),requestAnimationFrame(t)}))}),[t]),r.a.createElement("canvas",{className:"OriginalVideo",ref:n,style:e.style})},v=n(6),m=n(13),p=n(14),h=function(e,t){e.forEach((function(e){e.score,e.part;var n=e.position,a=n.x,r=n.y;t.beginPath(),t.arc(a,r,3,0,2*Math.PI),t.fillStyle="red",t.fill()}))},E=function(e,t){var n=e.filter((function(e){var t=e.part;return["leftEye","rightEye","leftEar","rightEar"].includes(t)})),a=n.map((function(e){return e.position.x})),r=n.map((function(e){return e.position.y})),i=Math.max.apply(Math,Object(v.a)(a)),c=Math.min.apply(Math,Object(v.a)(a)),o=Math.max.apply(Math,Object(v.a)(r)),s=Math.min.apply(Math,Object(v.a)(r));t.beginPath(),t.moveTo(i,o),t.lineTo(i,s),t.lineTo(c,s),t.lineTo(c,o),t.fillStyle="black",t.fill()},y=function(e){var t=e.videoEl,n=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=t.current,a=n.current,r=function(){var t=Object(l.a)(u.a.mark((function t(){var n,i,c,o,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a({});case 2:return n=t.sent,i=a.getContext("2d"),c=p.a.fromPixels(e),t.next=7,n.estimateMultiplePoses(c,{flipHorizontal:!1,maxDetections:5,scoreThreshold:.6,nmsRadius:20});case 7:o=t.sent,c.dispose(),n.dispose(),s=o.filter((function(e){return.5<e.score})),console.log(s),i.clearRect(0,0,a.width,a.height),s.forEach((function(e){var t=e.keypoints;return h(t,i)})),s.forEach((function(e){var t=e.keypoints;return E(t,i)})),requestAnimationFrame(r);case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e.addEventListener("loadedmetadata",(function(){a.width=e.videoWidth,a.height=e.videoHeight})),e.addEventListener("loadeddata",r)}),[t]),r.a.createElement("canvas",{className:"Keypoints",ref:n,style:e.style})},b=function(e){var t=e.setDeviceId,n=Object(a.useRef)(),i=Object(a.useState)([]),c=Object(o.a)(i,2),s=c[0],f=c[1];return Object(a.useEffect)((function(){var e=navigator.mediaDevices;(function(){var t=Object(l.a)(u.a.mark((function t(){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||!e.enumerateDevices){t.next=7;break}return t.next=3,navigator.mediaDevices.enumerateDevices();case 3:n=t.sent,(a=n.filter((function(e){return"videoinput"===e.kind})).map((function(e,t){return r.a.createElement("option",{value:e.deviceId,key:t+1},"camera ",t," ",e.label)}))).unshift(r.a.createElement("option",{key:"0"},"select device")),f(a);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),r.a.createElement("select",{ref:n,onChange:function(e){return t(e.target.value)}},s)},g=function(e){var t=e.position,n=Object(a.useRef)(),i=Object(a.useState)(null),c=Object(o.a)(i,2),s=c[0],u=c[1],l={position:"absolute",top:0,left:0};return s?r.a.createElement("div",{className:"WebCamera",style:t},r.a.createElement(f,{className:"Input",videoEl:n,deviceId:s}),r.a.createElement("div",{className:"Output",style:{position:"relative"}},r.a.createElement(d,{className:"layer",style:l,videoEl:n}),r.a.createElement(y,{className:"layer",style:l,videoEl:n}))):r.a.createElement(b,{setDeviceId:u})},O=function(){return r.a.createElement("div",{className:"App",style:{position:"relative"}},r.a.createElement(g,{position:{position:"absolute",top:0,left:0}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[15,1,2]]]);
//# sourceMappingURL=main.01ec1dc0.chunk.js.map