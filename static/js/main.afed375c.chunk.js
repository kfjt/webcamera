(this.webpackJsonpwebcamera=this.webpackJsonpwebcamera||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(36)},,,,,function(e,t,n){},function(e,t,n){},,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(13),o=n.n(i),c=(n(22),n(23),n(4)),l=n.n(c),s=n(8),u=function(e){return Object(a.useEffect)((function(){var t=e.current;(function(){var e=Object(s.a)(l.a.mark((function e(){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=navigator,!(a=n.mediaDevices)||null===t){e.next=5;break}return e.next=4,a.getUserMedia({video:{facingMode:"environment"}});case 4:t.srcObject=e.sent;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[e]),e},d=function(e){var t=e.videoEl,n=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=t.current,a=n.current;e.addEventListener("loadedmetadata",(function(){a.width=e.videoWidth,a.height=e.videoHeight,e.style.display="none"})),e.addEventListener("loadeddata",e.play),e.addEventListener("loadeddata",(function t(){a.getContext("2d").drawImage(e,0,0),requestAnimationFrame(t)}))}),[t]),r.a.createElement("canvas",{className:"OriginalVideo",ref:n,style:e.style})},f=n(6),m=n(14),v=n(16),p=function(e,t){e.forEach((function(e){e.score,e.part;var n=e.position,a=n.x,r=n.y;t.beginPath(),t.arc(a,r,3,0,2*Math.PI),t.fillStyle="red",t.fill()}))},y=function(e,t){var n=e.filter((function(e){var t=e.part;return["leftEye","rightEye","leftEar","rightEar"].includes(t)})),a=n.map((function(e){return e.position.x})),r=n.map((function(e){return e.position.y})),i=Math.max.apply(Math,Object(f.a)(a)),o=Math.min.apply(Math,Object(f.a)(a)),c=Math.max.apply(Math,Object(f.a)(r)),l=Math.min.apply(Math,Object(f.a)(r));t.beginPath(),t.moveTo(i,c),t.lineTo(i,l),t.lineTo(o,l),t.lineTo(o,c),t.fillStyle="black",t.fill()},h=function(e){var t=e.videoEl,n=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=t.current,a=n.current,r=function(){var t=Object(s.a)(l.a.mark((function t(){var n,i,o,c,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.a({});case 2:return n=t.sent,i=a.getContext("2d"),o=v.a.fromPixels(e),t.next=7,n.estimateMultiplePoses(o,{flipHorizontal:!1,maxDetections:5,scoreThreshold:.6,nmsRadius:20});case 7:c=t.sent,o.dispose(),n.dispose(),s=c.filter((function(e){return.5<e.score})),console.log(s),s.length&&i.clearRect(0,0,a.width,a.height),s.forEach((function(e){var t=e.keypoints;return p(t,i)})),s.forEach((function(e){var t=e.keypoints;return y(t,i)})),requestAnimationFrame(r);case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e.addEventListener("loadedmetadata",(function(){a.width=e.videoWidth,a.height=e.videoHeight})),e.addEventListener("loadeddata",r)}),[t]),r.a.createElement("canvas",{className:"Keypoints",ref:n,style:e.style})},E=function(e){var t=Object(a.useRef)(null);u(t);var n={position:"absolute",top:0,left:0};return r.a.createElement("div",{className:"WebCamera",style:e.style},r.a.createElement("video",{className:"Input",ref:t}),r.a.createElement("div",{className:"Output",style:{position:"relative"}},r.a.createElement(d,{className:"layer",style:n,videoEl:t}),r.a.createElement(h,{className:"layer",style:n,videoEl:t})))},g=(n(35),n(5)),b=function(e){return r.a.createElement(g.Scene,{style:e.style},r.a.createElement(g.Entity,{geometry:{primitive:"box"},material:{color:"red"},position:{x:0,y:0,z:-5}}),r.a.createElement(g.Entity,{light:{type:"point"}}),r.a.createElement(g.Entity,{"gltf-model":{src:"virtualcity.gltf"}}),r.a.createElement(g.Entity,{text:{value:"Hello, WebVR!"}}))},w=n(15),x=function(e){var t=Object(a.useState)({}),n=Object(w.a)(t,2),i=n[0],o=n[1],c=navigator.geolocation,l=function(e){var t=e.coords;console.info(t);var n=t.accuracy,a=t.latitude,r=t.longitude;o({accuracy:n,latitude:a,longitude:r})};return Object(a.useEffect)((function(){c&&c.getCurrentPosition&&c.getCurrentPosition(l,console.error);var e=setInterval((function(){return c.getCurrentPosition(l,console.error)}),1e3);return function(){return clearInterval(e)}}),[c]),r.a.createElement("div",{className:"geolocation",style:e.style},r.a.createElement("div",null,"accuracy:".concat(i.accuracy)),r.a.createElement("div",null,"latitude:".concat(i.latitude)),r.a.createElement("div",null,"longitude:".concat(i.longitude)))},O=function(){return r.a.createElement("div",{className:"App",style:{position:"relative"}},r.a.createElement(E,{style:{position:"absolute"}}),r.a.createElement(x,{style:{position:"absolute"}}),r.a.createElement(b,{style:{position:"absolute"}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[17,1,2]]]);
//# sourceMappingURL=main.afed375c.chunk.js.map